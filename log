=== RUN   TestGetDeploymentSchedule
--- PASS: TestGetDeploymentSchedule (0.00s)
=== RUN   TestUnmarshal
--- PASS: TestUnmarshal (0.00s)
=== RUN   TestGetTemplateTokens
--- PASS: TestGetTemplateTokens (0.00s)
=== RUN   TestValidateRepositoryFilePathTemplate
--- PASS: TestValidateRepositoryFilePathTemplate (0.00s)
=== RUN   TestValidateRepositorySchemaPathTemplate
--- PASS: TestValidateRepositorySchemaPathTemplate (0.00s)
=== RUN   TestValidateProjectDBNameTemplate
--- PASS: TestValidateProjectDBNameTemplate (0.00s)
=== RUN   TestFormatTemplate
--- PASS: TestFormatTemplate (0.00s)
=== RUN   TestGetBaseDatabaseName
--- PASS: TestGetBaseDatabaseName (0.00s)
PASS
ok  	github.com/bytebase/bytebase/api	(cached)
?   	github.com/bytebase/bytebase/bin/bb	[no test files]
=== RUN   TestGetDatabase
--- PASS: TestGetDatabase (0.00s)
=== RUN   TestVersion
--- PASS: TestVersion (0.00s)
PASS
ok  	github.com/bytebase/bytebase/bin/bb/cmd	(cached)
?   	github.com/bytebase/bytebase/bin/server	[no test files]
?   	github.com/bytebase/bytebase/bin/server/cmd	[no test files]
=== RUN   TestHasPrefixes
=== RUN   TestHasPrefixes/has_prefixes
=== RUN   TestHasPrefixes/has_no_matching_prefix
--- PASS: TestHasPrefixes (0.00s)
    --- PASS: TestHasPrefixes/has_prefixes (0.00s)
    --- PASS: TestHasPrefixes/has_no_matching_prefix (0.00s)
PASS
ok  	github.com/bytebase/bytebase/common	(cached)
?   	github.com/bytebase/bytebase/enterprise/api	[no test files]
?   	github.com/bytebase/bytebase/enterprise/config	[no test files]
?   	github.com/bytebase/bytebase/enterprise/service	[no test files]
?   	github.com/bytebase/bytebase/plugin/advisor	[no test files]
?   	github.com/bytebase/bytebase/plugin/advisor/fake	[no test files]
=== RUN   TestColumnRequirement
--- PASS: TestColumnRequirement (0.00s)
=== RUN   TestBasic
--- PASS: TestBasic (0.00s)
=== RUN   TestAlterTable
--- PASS: TestAlterTable (0.00s)
=== RUN   TestAlterTableChangeColumnType
--- PASS: TestAlterTableChangeColumnType (0.00s)
=== RUN   TestMysql8WindowFunction
--- PASS: TestMysql8WindowFunction (0.00s)
=== RUN   TestTableNamingRequirement
--- PASS: TestTableNamingRequirement (0.00s)
=== RUN   TestWhereRequirement
--- PASS: TestWhereRequirement (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/advisor/mysql	(cached)
=== RUN   TestParseMigrationInfo
--- PASS: TestParseMigrationInfo (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/db	(cached)
?   	github.com/bytebase/bytebase/plugin/db/clickhouse	[no test files]
?   	github.com/bytebase/bytebase/plugin/db/mysql	[no test files]
?   	github.com/bytebase/bytebase/plugin/db/pg	[no test files]
?   	github.com/bytebase/bytebase/plugin/db/snowflake	[no test files]
?   	github.com/bytebase/bytebase/plugin/db/sqlite	[no test files]
=== RUN   TestToStoredVersion
--- PASS: TestToStoredVersion (0.00s)
=== RUN   TestFromStoredVersion
--- PASS: TestFromStoredVersion (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/db/util	(cached)
=== RUN   TestBranch
--- PASS: TestBranch (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/vcs	(cached)
=== RUN   TestProvider_FetchUserInfo
--- PASS: TestProvider_FetchUserInfo (0.00s)
=== RUN   TestProvider_ExchangeOAuthToken
--- PASS: TestProvider_ExchangeOAuthToken (0.00s)
=== RUN   TestOAuth_RefreshToken
--- PASS: TestOAuth_RefreshToken (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/vcs/github	(cached)
=== RUN   TestProvider_FetchUserInfo
--- PASS: TestProvider_FetchUserInfo (0.00s)
=== RUN   TestProvider_ExchangeOAuthToken
--- PASS: TestProvider_ExchangeOAuthToken (0.00s)
=== RUN   TestOAuth_RefreshToken
--- PASS: TestOAuth_RefreshToken (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/vcs/gitlab	(cached)
=== RUN   TestPost
--- PASS: TestPost (0.00s)
=== RUN   TestGet
--- PASS: TestGet (0.00s)
=== RUN   TestPut
--- PASS: TestPut (0.00s)
=== RUN   TestDelete
--- PASS: TestDelete (0.00s)
=== RUN   TestRetry_Exceeded
--- PASS: TestRetry_Exceeded (0.00s)
PASS
ok  	github.com/bytebase/bytebase/plugin/vcs/internal/oauth	(cached)
?   	github.com/bytebase/bytebase/plugin/webhook	[no test files]
?   	github.com/bytebase/bytebase/resources/postgres	[no test files]
?   	github.com/bytebase/bytebase/resources/utils	[no test files]
=== RUN   TestValidateDatabaseLabelList
--- PASS: TestValidateDatabaseLabelList (0.00s)
=== RUN   TestGetDatabaseMatrixFromDeploymentSchedule
--- PASS: TestGetDatabaseMatrixFromDeploymentSchedule (0.00s)
=== RUN   TestGetPeerTenantDatabase
--- PASS: TestGetPeerTenantDatabase (0.00s)
=== RUN   TestParseSheetInfo
--- PASS: TestParseSheetInfo (0.00s)
=== RUN   TestValidateSQLSelectStatement
--- PASS: TestValidateSQLSelectStatement (0.00s)
PASS
ok  	github.com/bytebase/bytebase/server	(cached)
=== RUN   TestGetMinorMigrationVersions
--- PASS: TestGetMinorMigrationVersions (0.00s)
=== RUN   TestGetMinorVersions
--- PASS: TestGetMinorVersions (0.00s)
=== RUN   TestGetPatchVersions
--- PASS: TestGetPatchVersions (0.00s)
=== RUN   TestMigrationCompatibility
2022/05/07 15:42:58 Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestMigrationCompatibility2676330512/001/data ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestMigrationCompatibility2676330512/001/resource/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestMigrationCompatibility2676330512/001/data -l logfile start

waiting for server to start....2022-05-07 15:43:16.969 CST [77141] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:16.969 CST [77141] LOG:  listening on Unix socket "/tmp/.s.PGSQL.6000"
2022-05-07 15:43:16.973 CST [77142] LOG:  database system was shut down at 2022-05-07 15:43:15 CST
2022-05-07 15:43:16.975 CST [77141] LOG:  database system is ready to accept connections
 done
server started
2022-05-07 15:43:17.067 CST [77149] FATAL:  database "test" does not exist
2022-05-07 15:43:17.069 CST [77150] FATAL:  database "bytebase" does not exist
waiting for server to shut down....2022-05-07 15:43:17.950 CST [77141] LOG:  received fast shutdown request
2022-05-07 15:43:17.950 CST [77141] LOG:  aborting any active transactions
2022-05-07 15:43:17.950 CST [77192] FATAL:  terminating connection due to administrator command
2022-05-07 15:43:17.950 CST [77141] LOG:  background worker "logical replication launcher" (PID 77148) exited with exit code 1
2022-05-07 15:43:17.951 CST [77143] LOG:  shutting down
2022-05-07 15:43:17.962 CST [77141] LOG:  database system is shut down
 done
server stopped
--- PASS: TestMigrationCompatibility (20.16s)
=== RUN   TestGetCutoffVersion
--- PASS: TestGetCutoffVersion (0.00s)
=== RUN   TestGetBatchUpdatePrincipalIDList
=== RUN   TestGetBatchUpdatePrincipalIDList/single_create
=== RUN   TestGetBatchUpdatePrincipalIDList/create_delete
=== RUN   TestGetBatchUpdatePrincipalIDList/create_patch
=== RUN   TestGetBatchUpdatePrincipalIDList/delete_patch
=== RUN   TestGetBatchUpdatePrincipalIDList/mixed
=== RUN   TestGetBatchUpdatePrincipalIDList/single_patch
=== RUN   TestGetBatchUpdatePrincipalIDList/single_delete
--- PASS: TestGetBatchUpdatePrincipalIDList (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/single_create (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/create_delete (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/create_patch (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/delete_patch (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/mixed (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/single_patch (0.00s)
    --- PASS: TestGetBatchUpdatePrincipalIDList/single_delete (0.00s)
PASS
ok  	github.com/bytebase/bytebase/store	20.451s
=== RUN   TestBootWithExternalPostgres
=== PAUSE TestBootWithExternalPostgres
=== RUN   TestSchemaAndDataUpdate
=== PAUSE TestSchemaAndDataUpdate
=== RUN   TestVCS
=== PAUSE TestVCS
=== RUN   TestServiceRestart
=== PAUSE TestServiceRestart
=== RUN   TestTenant
=== PAUSE TestTenant
=== RUN   TestTenantVCS
=== PAUSE TestTenantVCS
=== RUN   TestTenantDatabaseNameTemplate
=== PAUSE TestTenantDatabaseNameTemplate
=== RUN   TestTenantVCSDatabaseNameTemplate
=== PAUSE TestTenantVCSDatabaseNameTemplate
=== CONT  TestBootWithExternalPostgres
=== CONT  TestTenant
=== CONT  TestVCS
=== CONT  TestSchemaAndDataUpdate
=== CONT  TestTenantDatabaseNameTemplate
=== CONT  TestTenantVCSDatabaseNameTemplate
=== CONT  TestTenantVCS
-----Config BEGIN-----
=== CONT  TestServiceRestart
-----Config BEGIN-----
mode=dev
server=http://localhost:1243
datastore=http://localhost:1244
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
-----Config BEGIN-----
debug=false
-----Config END-------
-----Config BEGIN-----
mode=dev
server=http://localhost:1246
datastore=http://localhost:1247
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
debug=false
-----Config END-------
-----Config BEGIN-----
mode=dev
server=http://localhost:1261
datastore=http://localhost:1262
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
debug=false
-----Config END-------
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/001/pgdata
-----Embedded Postgres Config END-----
-----Config BEGIN-----
mode=dev
server=http://localhost:1237
datastore=http://localhost:1238
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
debug=false
-----Config END-------
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestSchemaAndDataUpdate1731897188/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestSchemaAndDataUpdate1731897188/001/pgdata
-----Embedded Postgres Config END-----
2022-05-07 15:43:00.357644 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCS806595462/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCS806595462/001/pgdata
-----Embedded Postgres Config END-----
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenant90656939/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenant90656939/001/pgdata
-----Embedded Postgres Config END-----
mode=dev
server=http://localhost:1240
datastore=http://localhost:1241
2022-05-07T15:43:00.357+0800	INFO	Preparing embedded PostgreSQL instance...
mode=dev
2022-05-07T15:43:00.357+0800	INFO	Preparing embedded PostgreSQL instance...
frontend=:0
server=http://localhost:1249
-----Config BEGIN-----
mode=dev
server=http://localhost:1234
datastore=http://localhost:1235
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
debug=false
-----Config END-------
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/pgdata
-----Embedded Postgres Config END-----
2022-05-07T15:43:00.358+0800	INFO	Preparing embedded PostgreSQL instance...
2022-05-07 15:43:00.358003 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
2022-05-07 15:43:00.358307 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
2022-05-07T15:43:00.357+0800	INFO	Preparing embedded PostgreSQL instance...
2022-05-07 15:43:00.358342 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
2022-05-07T15:43:00.357+0800	INFO	Preparing embedded PostgreSQL instance...
datastore=http://localhost:1250
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
2022-05-07 15:43:00.358373 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
debug=false
-----Config END-------
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantDatabaseNameTemplate1902385760/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantDatabaseNameTemplate1902385760/001/pgdata
-----Embedded Postgres Config END-----
demoDataDir=demo/dev
2022-05-07 15:43:00.358416 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
readonly=false
demo=false
debug=false
-----Config END-------
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestVCS1946357793/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestVCS1946357793/001/pgdata
-----Embedded Postgres Config END-----
2022-05-07T15:43:00.358+0800	INFO	Preparing embedded PostgreSQL instance...
2022-05-07 15:43:00.358540 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
2022-05-07T15:43:00.358+0800	INFO	Preparing embedded PostgreSQL instance...
2022-05-07 15:43:00.358830 I | Installing Postgres OS "darwin" Arch "arm64" txz "postgres-darwin-x86_64.txz"
The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestBootWithExternalPostgres3091349089/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenant90656939/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantDatabaseNameTemplate1902385760/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCS806595462/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestVCS1946357793/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... The files belonging to this database system will be owned by user "h3n4l".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestSchemaAndDataUpdate1731897188/001/pgdata ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... Asia/Shanghai
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/001/pgdata -l logfile start

ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestBootWithExternalPostgres3091349089/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestBootWithExternalPostgres3091349089/001/pgdata -l logfile start

waiting for server to start....ok
syncing data to disk ... 2022-05-07 15:43:27.478 CST [77266] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:27.479 CST [77266] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1262"
2022-05-07 15:43:27.482 CST [77267] LOG:  database system was shut down at 2022-05-07 15:43:26 CST
2022-05-07 15:43:27.484 CST [77266] LOG:  database system is ready to accept connections
ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenant90656939/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenant90656939/001/pgdata -l logfile start

 done
server started
2022-05-07 15:43:27.568 CST [77275] FATAL:  database "bbtest" does not exist
2022-05-07 15:43:27.569 CST [77276] FATAL:  database "bytebase" does not exist
2022-05-07T15:43:27.579+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07T15:43:27.641+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
2022-05-07T15:43:27.646+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:27.646+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:27.646+0800	INFO	The prod cutoff schema version: 1.0.1
ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantDatabaseNameTemplate1902385760/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantDatabaseNameTemplate1902385760/001/pgdata -l logfile start

2022-05-07T15:43:27.830+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:27.830+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
2022-05-07T15:43:27.932+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCS806595462/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCS806595462/001/pgdata -l logfile start

2022-05-07T15:43:28.036+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:28.146+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:28.267+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:28.395+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:28.395+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:28.395+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:28.405+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:28.406+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:28.406+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:28.407+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:28.408+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:28.410+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:28.411+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:28.411+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:28.413+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:28.414+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:28.415+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:28.416+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:28.418+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:28.420+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:28.422+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:28.423+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:28.423+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:28.424+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:28.425+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:28.427+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:28.427+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:28.428+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:28.429+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:28.430+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:28.430+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:28.432+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:28.433+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:28.434+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:28.434+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:28.435+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:28.436+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:28.437+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:28.438+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:28.439+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:28.439+0800	INFO	Completed demo data setup.
2022-05-07T15:43:28.441+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:28.442+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:28.442+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
⇨ http server started on [::]:1263
ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/pgdata -l logfile start

waiting for server to start....2022-05-07 15:43:29.036 CST [77325] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.036 CST [77325] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1264"
2022-05-07 15:43:29.039 CST [77326] LOG:  database system was shut down at 2022-05-07 15:43:27 CST
2022-05-07 15:43:29.041 CST [77325] LOG:  database system is ready to accept connections
ok
syncing data to disk ... ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestVCS1946357793/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestVCS1946357793/001/pgdata -l logfile start

 done
server started
-----Config BEGIN-----
mode=dev
server=http://localhost:1265
datastore=http://localhost:1266
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
debug=false
-----Config END-------
2022-05-07T15:43:29.129+0800	INFO	Establishing external PostgreSQL connection...	{"pgURL": "postgresql://bbexternal@:1264/postgres"}
2022-05-07T15:43:29.136+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07T15:43:29.139+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
2022-05-07T15:43:29.141+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:29.141+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:29.142+0800	INFO	The prod cutoff schema version: 1.0.1
ok
syncing data to disk ... waiting for server to start....ok

initdb: warning: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestSchemaAndDataUpdate1731897188/001/resources/postgres-darwin-x86_64/bin/pg_ctl -D /var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestSchemaAndDataUpdate1731897188/001/pgdata -l logfile start

2022-05-07 15:43:29.247 CST [77343] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.247 CST [77343] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1244"
2022-05-07 15:43:29.250 CST [77345] LOG:  database system was shut down at 2022-05-07 15:43:27 CST
2022-05-07 15:43:29.252 CST [77343] LOG:  database system is ready to accept connections
2022-05-07T15:43:29.300+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:29.300+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
waiting for server to start.... done
server started
2022-05-07 15:43:29.337 CST [77357] FATAL:  database "bbtest" does not exist
2022-05-07 15:43:29.338 CST [77358] FATAL:  database "bytebase" does not exist
2022-05-07 15:43:29.341 CST [77356] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.341 CST [77356] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1250"
2022-05-07 15:43:29.347 CST [77361] LOG:  database system was shut down at 2022-05-07 15:43:27 CST
2022-05-07T15:43:29.347+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07 15:43:29.349 CST [77356] LOG:  database system is ready to accept connections
2022-05-07T15:43:29.392+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
2022-05-07T15:43:29.397+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:29.397+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:29.397+0800	INFO	The prod cutoff schema version: 1.0.1
waiting for server to start....2022-05-07 15:43:29.427 CST [77379] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.427 CST [77379] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1247"
2022-05-07 15:43:29.430 CST [77380] LOG:  database system was shut down at 2022-05-07 15:43:27 CST
 done
server started
2022-05-07 15:43:29.432 CST [77379] LOG:  database system is ready to accept connections
2022-05-07 15:43:29.433 CST [77387] FATAL:  database "bbtest" does not exist
2022-05-07 15:43:29.434 CST [77388] FATAL:  database "bytebase" does not exist
2022-05-07T15:43:29.439+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07T15:43:29.449+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
waiting for server to start....2022-05-07T15:43:29.507+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
 done
server started
2022-05-07 15:43:29.516 CST [77400] FATAL:  database "bbtest" does not exist
2022-05-07T15:43:29.517+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:29.517+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:29.517+0800	INFO	The prod cutoff schema version: 1.0.1
2022-05-07 15:43:29.519 CST [77401] FATAL:  database "bytebase" does not exist
2022-05-07 15:43:29.524 CST [77397] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.525 CST [77397] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1235"
2022-05-07 15:43:29.529 CST [77406] LOG:  database system was shut down at 2022-05-07 15:43:28 CST
2022-05-07T15:43:29.530+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07 15:43:29.532 CST [77397] LOG:  database system is ready to accept connections
2022-05-07T15:43:29.596+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
 done
server started
2022-05-07T15:43:29.605+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:29.605+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:29.605+0800	INFO	The prod cutoff schema version: 1.0.1
2022-05-07 15:43:29.606 CST [77423] FATAL:  database "bbtest" does not exist
2022-05-07 15:43:29.608 CST [77425] FATAL:  database "bytebase" does not exist
2022-05-07T15:43:29.621+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
waiting for server to start....2022-05-07 15:43:29.680 CST [77431] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.681 CST [77431] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1241"
2022-05-07 15:43:29.709 CST [77433] LOG:  database system was shut down at 2022-05-07 15:43:29 CST
2022-05-07 15:43:29.712 CST [77431] LOG:  database system is ready to accept connections
2022-05-07T15:43:29.735+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
2022-05-07T15:43:29.737+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
 done
server started
2022-05-07T15:43:29.749+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:29.749+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:29.749+0800	INFO	The prod cutoff schema version: 1.0.1
2022-05-07 15:43:29.751 CST [77447] FATAL:  database "bbtest" does not exist
2022-05-07 15:43:29.754 CST [77449] FATAL:  database "bytebase" does not exist
2022-05-07T15:43:29.755+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:29.755+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
2022-05-07T15:43:29.769+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07T15:43:29.862+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
2022-05-07T15:43:29.871+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:29.871+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:29.871+0800	INFO	The prod cutoff schema version: 1.0.1
waiting for server to start....2022-05-07 15:43:29.926 CST [77464] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:29.927 CST [77464] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1238"
2022-05-07 15:43:29.946 CST [77473] LOG:  database system was shut down at 2022-05-07 15:43:29 CST
2022-05-07 15:43:29.950 CST [77464] LOG:  database system is ready to accept connections
2022-05-07T15:43:29.972+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:29.972+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
 done
server started
2022-05-07 15:43:30.007 CST [77484] FATAL:  database "bbtest" does not exist
2022-05-07 15:43:30.009 CST [77485] FATAL:  database "bytebase" does not exist
2022-05-07T15:43:30.023+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "", "database": ""}
2022-05-07T15:43:30.076+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:30.076+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
2022-05-07T15:43:30.092+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:30.103+0800	INFO	Successfully created migration schema.	{"environment": "", "database": ""}
2022-05-07T15:43:30.111+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:30.111+0800	INFO	The database schema has not been setup.
2022-05-07T15:43:30.111+0800	INFO	The prod cutoff schema version: 1.0.1
2022-05-07T15:43:30.155+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
2022-05-07T15:43:30.228+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:30.228+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
2022-05-07T15:43:30.291+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
2022-05-07T15:43:30.412+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:30.412+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
2022-05-07T15:43:30.555+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
2022-05-07T15:43:30.578+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:30.605+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:30.649+0800	INFO	Completed database initial migration with version 1.0.1.
2022-05-07T15:43:30.649+0800	INFO	Migrating dev migration/dev/20220407000000__github_com.sql...
2022-05-07T15:43:30.668+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
2022-05-07T15:43:30.711+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:30.767+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
2022-05-07T15:43:30.886+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:30.962+0800	INFO	Migrating dev migration/dev/20220407000001__sheet_vcs.sql...
2022-05-07T15:43:30.967+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:30.997+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:31.049+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:31.049+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:31.049+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:31.062+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:31.082+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:31.087+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:31.089+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:31.093+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:31.097+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:31.111+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:31.115+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:31.121+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:31.128+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:31.130+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:31.133+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:31.147+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:31.156+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:31.170+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:31.182+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:31.187+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:31.195+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:31.203+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:31.211+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:31.220+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:31.226+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:31.232+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:31.238+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:31.247+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:31.253+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:31.262+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:31.264+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:31.265+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:31.267+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:31.268+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:31.269+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:31.275+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:31.277+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:31.280+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:31.282+0800	INFO	Completed demo data setup.
2022-05-07T15:43:31.286+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:31.290+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:31.290+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:31.290+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
2022-05-07T15:43:31.304+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
⇨ http server started on [::]:1267
2022-05-07T15:43:31.403+0800	INFO	Migrating dev migration/dev/20220407000002__task_dag.sql...
2022-05-07T15:43:31.411+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:31.418+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:31.589+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:31.771+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:31.818+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:31.932+0800	INFO	Migrating dev migration/dev/20220408000000__schema_version_type.sql...
2022-05-07T15:43:31.983+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:31.983+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:31.983+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:32.006+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:32.009+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:32.010+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:32.012+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:32.014+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:32.019+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:32.024+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:32.026+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:32.031+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:32.034+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:32.038+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:32.046+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:32.051+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:32.060+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:32.063+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:32.065+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:32.066+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:32.068+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:32.070+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:32.075+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:32.076+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:32.078+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:32.079+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:32.081+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:32.082+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:32.087+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:32.090+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:32.092+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:32.093+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:32.095+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:32.097+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:32.102+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:32.104+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:32.122+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:32.128+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:32.135+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:32.138+0800	INFO	Completed demo data setup.
2022-05-07T15:43:32.143+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:32.144+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:32.144+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
⇨ http server started on [::]:1245
2022-05-07T15:43:32.275+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:32.275+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:32.275+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:32.286+0800	INFO	Migrating dev migration/dev/20220419000000__sheet_organizer.sql...
2022-05-07T15:43:32.292+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:32.294+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:32.294+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:32.295+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:32.296+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:32.299+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:32.302+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:32.305+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:32.307+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:32.309+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:32.310+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:32.313+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:32.315+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:32.321+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:32.323+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:32.325+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:32.326+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:32.329+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:32.331+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:32.334+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:32.335+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:32.336+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:32.336+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:32.336+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:32.337+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:32.339+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:32.341+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:32.342+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:32.345+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:32.348+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:32.348+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:32.349+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:32.350+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:32.351+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:32.351+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:32.352+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:32.353+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:32.353+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:32.355+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:32.357+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:32.357+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:32.358+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:32.358+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:32.362+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:32.363+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:32.375+0800	INFO	Completed demo data setup.
2022-05-07T15:43:32.376+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:32.381+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:32.389+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:32.390+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:32.392+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:32.392+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
2022-05-07T15:43:32.408+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:32.416+0800	INFO	Applying data file demo/dev/10072__col.sql...
⇨ http server started on [::]:1251
2022-05-07T15:43:32.450+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:32.470+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:32.475+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:32.480+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:32.488+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:32.494+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:32.500+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:32.501+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:32.504+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:32.506+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:32.508+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:32.509+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:32.513+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:32.515+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:32.516+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:32.519+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:32.522+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:32.524+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:32.530+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:32.531+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:32.534+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:32.536+0800	INFO	Completed demo data setup.
2022-05-07T15:43:32.553+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:32.553+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:32.554+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
2022-05-07T15:43:32.574+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:32.574+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:32.574+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:32.576+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:32.576+0800	INFO	Setting up demo data from "demo/dev"...
⇨ http server started on [::]:1248
2022-05-07T15:43:32.576+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:32.592+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:32.594+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:32.594+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:32.594+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:32.596+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:32.596+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:32.596+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:32.597+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:32.597+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:32.599+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:32.600+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:32.602+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:32.602+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:32.603+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:32.604+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:32.605+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:32.606+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:32.608+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:32.608+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:32.610+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:32.610+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:32.612+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:32.612+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:32.616+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:32.617+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:32.619+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:32.622+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:32.626+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:32.627+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:32.628+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:32.635+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:32.635+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:32.637+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:32.638+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:32.639+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:32.639+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:32.642+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:32.644+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:32.645+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:32.648+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:32.650+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:32.651+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:32.651+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:32.652+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:32.653+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:32.654+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:32.654+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:32.655+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:32.656+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:32.658+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:32.659+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:32.661+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:32.661+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:32.662+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:32.663+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:32.663+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:32.664+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:32.664+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:32.665+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:32.666+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:32.667+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:32.669+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:32.670+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:32.672+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:32.673+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:32.673+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:32.674+0800	INFO	Completed demo data setup.
2022-05-07T15:43:32.675+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:32.676+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:32.676+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:32.677+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:32.677+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}
2022-05-07T15:43:32.677+0800	INFO	Completed demo data setup.

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
2022-05-07T15:43:32.679+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:32.679+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:32.679+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
⇨ http server started on [::]:1242
⇨ http server started on [::]:1236
2022-05-07T15:43:32.690+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:32.690+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:32.690+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:32.701+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:32.704+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:32.723+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:32.727+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:32.728+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:32.730+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:32.731+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:32.732+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:32.735+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:32.736+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:32.737+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:32.740+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:32.741+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:32.744+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:32.746+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:32.748+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:32.749+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:32.750+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:32.751+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:32.754+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:32.755+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:32.757+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:32.758+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:32.759+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:32.760+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:32.763+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:32.764+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:32.765+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:32.766+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:32.767+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:32.768+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:32.770+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:32.771+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:32.772+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:32.773+0800	INFO	Completed demo data setup.
2022-05-07T15:43:32.774+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:32.777+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:32.777+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
⇨ http server started on [::]:1239
{"time":"2022-05-07T15:43:32+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
2022-05-07T15:43:32.837+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:32+08:00","method":"PATCH","uri":"/api/subscription","status":200,"error":""}
{"time":"2022-05-07T15:43:32+08:00","method":"POST","uri":"/api/vcs","status":200,"error":""}
{"time":"2022-05-07T15:43:32+08:00","method":"POST","uri":"/api/project","status":200,"error":""}
{"time":"2022-05-07T15:43:32.966036+08:00","id":"","remote_ip":"::1","host":"localhost:1263","method":"POST","uri":"/api/v4/projects/121/hooks","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":42334,"latency_human":"42.334µs","bytes_in":200,"bytes_out":0}
{"time":"2022-05-07T15:43:32+08:00","method":"POST","uri":"/api/project/3008/repository","status":200,"error":""}
{"time":"2022-05-07T15:43:33+08:00","method":"GET","uri":"/api/environment","status":200,"error":""}
2022-05-07T15:43:33.034+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:33.042+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Staging", "database": "testInstanceStaging-0"}
2022-05-07T15:43:33.047+0800	INFO	Successfully created migration schema.	{"environment": "Staging", "database": "testInstanceStaging-0"}
{"time":"2022-05-07T15:43:33+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:33.078+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:33.087+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-0"}
2022-05-07T15:43:33.091+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-0"}
{"time":"2022-05-07T15:43:33+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:33.107+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:33.111+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-1"}
2022-05-07T15:43:33.130+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-1"}
{"time":"2022-05-07T15:43:33+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:33.144+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:33.153+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-2"}
2022-05-07T15:43:33.164+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-2"}
{"time":"2022-05-07T15:43:33+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
{"time":"2022-05-07T15:43:33+08:00","method":"GET","uri":"/api/label","status":200,"error":""}
{"time":"2022-05-07T15:43:33+08:00","method":"PATCH","uri":"/api/label/20002","status":200,"error":""}
{"time":"2022-05-07T15:43:33+08:00","method":"PATCH","uri":"/api/project/3008/deployment","status":200,"error":""}
{"time":"2022-05-07T15:43:33+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
[mysql] 2022/05/07 15:43:35 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:35 packets.go:37: unexpected EOF
{"time":"2022-05-07T15:43:35+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
2022-05-07T15:43:35.599+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:35.599+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:35.600+0800	INFO	Trying to close database connections
2022-05-07T15:43:35.600+0800	INFO	Bytebase stopped properly
waiting for server to shut down....2022-05-07 15:43:35.607 CST [77325] LOG:  received fast shutdown request
2022-05-07 15:43:35.607 CST [77325] LOG:  aborting any active transactions
2022-05-07 15:43:35.608 CST [77325] LOG:  background worker "logical replication launcher" (PID 77332) exited with exit code 1
2022-05-07 15:43:35.608 CST [77327] LOG:  shutting down
{"time":"2022-05-07T15:43:35+08:00","method":"PATCH","uri":"/api/pipeline/9011/task/11020/status","status":200,"error":""}
2022-05-07 15:43:35.649 CST [77325] LOG:  database system is shut down
 done
server stopped
{"time":"2022-05-07T15:43:35+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
--- PASS: TestBootWithExternalPostgres (35.48s)
{"time":"2022-05-07T15:43:35+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/issue/13011/status","status":200,"error":""}
2022-05-07T15:43:36.683+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/subscription","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/project","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/environment","status":200,"error":""}
2022-05-07T15:43:36.854+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/subscription","status":200,"error":""}
2022-05-07T15:43:36.855+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:36.858+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Staging", "database": "testInstanceStaging-0"}
2022-05-07T15:43:36.859+0800	INFO	Successfully created migration schema.	{"environment": "Staging", "database": "testInstanceStaging-0"}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:36.877+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/project","status":200,"error":""}
2022-05-07T15:43:36.879+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-0"}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/environment","status":200,"error":""}
2022-05-07T15:43:36.881+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:36.881+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-0"}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:36.884+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Staging", "database": "testInstanceStaging"}
2022-05-07T15:43:36.884+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:36.885+0800	INFO	Successfully created migration schema.	{"environment": "Staging", "database": "testInstanceStaging"}
2022-05-07T15:43:36.886+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-1"}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:36.887+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-1"}
2022-05-07T15:43:36.888+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:36.890+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:36.890+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd"}
2022-05-07T15:43:36.891+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-2"}
2022-05-07T15:43:36.892+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd"}
2022-05-07T15:43:36.894+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-2"}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/label","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"GET","uri":"/api/label","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/label/20002","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/label/20002","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/project/3008/deployment","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"PATCH","uri":"/api/project/3008/deployment","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:36+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
2022-05-07T15:43:37.004+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:37+08:00","method":"PATCH","uri":"/api/subscription","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
2022-05-07T15:43:37.100+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:37+08:00","method":"PATCH","uri":"/api/subscription","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/vcs","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/project","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/vcs","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/project","status":200,"error":""}
2022-05-07T15:43:37.215+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:37.215+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:37.216+0800	INFO	Trying to close database connections
2022-05-07T15:43:37.216+0800	INFO	Trying to shutdown postgresql server...
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/project","status":200,"error":""}
waiting for server to shut down....2022-05-07 15:43:37.224 CST [77397] LOG:  received fast shutdown request
2022-05-07 15:43:37.224 CST [77397] LOG:  aborting any active transactions
2022-05-07 15:43:37.224 CST [77397] LOG:  background worker "logical replication launcher" (PID 77413) exited with exit code 1
2022-05-07 15:43:37.225 CST [77408] LOG:  shutting down
{"time":"2022-05-07T15:43:37.24107+08:00","id":"","remote_ip":"::1","host":"localhost:1248","method":"POST","uri":"/api/v4/projects/121/hooks","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":132458,"latency_human":"132.458µs","bytes_in":200,"bytes_out":0}
2022-05-07T15:43:37.242+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:37+08:00","method":"PATCH","uri":"/api/subscription","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/project/3008/repository","status":200,"error":""}
2022-05-07 15:43:37.266 CST [77397] LOG:  database system is shut down
 done
server stopped
2022-05-07T15:43:37.329+0800	INFO	Bytebase stopped properly
-----Config BEGIN-----
mode=dev
server=http://localhost:1234
datastore=http://localhost:1235
frontend=:0
demoDataDir=demo/dev
readonly=false
demo=false
debug=false
-----Config END-------
-----Embedded Postgres Config BEGIN-----
resourceDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/resources
pgdataDir=/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestServiceRestart331902437/001/pgdata
-----Embedded Postgres Config END-----
2022-05-07T15:43:37.329+0800	INFO	Preparing embedded PostgreSQL instance...
waiting for server to start....{"time":"2022-05-07T15:43:37.358553+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"POST","uri":"/api/v4/projects/121/hooks","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":142333,"latency_human":"142.333µs","bytes_in":200,"bytes_out":0}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/project","status":200,"error":""}
2022-05-07 15:43:37.363 CST [77727] LOG:  starting PostgreSQL 14.2 on x86_64-apple-darwin20.6.0, compiled by Apple clang version 12.0.0 (clang-1200.0.32.29), 64-bit
2022-05-07 15:43:37.364 CST [77727] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1235"
2022-05-07 15:43:37.380 CST [77728] LOG:  database system was shut down at 2022-05-07 15:43:37 CST
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/environment","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/environment","status":200,"error":""}
2022-05-07T15:43:37.383+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07 15:43:37.384 CST [77727] LOG:  database system is ready to accept connections
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/project/3008/repository","status":200,"error":""}
2022-05-07T15:43:37.385+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/environment","status":200,"error":""}
2022-05-07T15:43:37.388+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:37.389+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstance1"}
2022-05-07T15:43:37.401+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstance1"}
2022-05-07T15:43:37.402+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Staging", "database": "testInstanceStaging-0"}
2022-05-07T15:43:37.403+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstance1"}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:37.405+0800	INFO	Successfully created migration schema.	{"environment": "Staging", "database": "testInstanceStaging-0"}
2022-05-07T15:43:37.405+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstance1"}
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/database?project=3008","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/database?instance=6011","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:37.408+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:37.410+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-0"}
2022-05-07T15:43:37.412+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-0"}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:37.415+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
2022-05-07T15:43:37.418+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-1"}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
2022-05-07T15:43:37.421+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-1"}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
2022-05-07T15:43:37.424+0800	INFO	Load valid license	{"plan": "TEAM", "expiresAt": "3021-02-05T08:00:00.000+0800", "instanceCount": 9999}
2022-05-07T15:43:37.425+0800	INFO	Bytebase migration schema not found, creating schema...	{"environment": "Prod", "database": "testInstanceProd-2"}
2022-05-07T15:43:37.427+0800	INFO	Successfully created migration schema.	{"environment": "Prod", "database": "testInstanceProd-2"}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/instance","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"GET","uri":"/api/label","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"PATCH","uri":"/api/label/20002","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"PATCH","uri":"/api/project/3008/deployment","status":200,"error":""}
{"time":"2022-05-07T15:43:37+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
 done
server started
2022-05-07T15:43:37.479+0800	INFO	Apply database migration if needed...
2022-05-07T15:43:37.479+0800	INFO	Current schema version before migration: 1.0.1
2022-05-07T15:43:37.479+0800	INFO	The prod cutoff schema version: 1.0.1
2022-05-07T15:43:37.489+0800	INFO	Starting minor version migration cycle from 1.0.0 ...
2022-05-07T15:43:37.489+0800	INFO	Database schema is at version 1.0.1; nothing to migrate.
2022-05-07T15:43:37.489+0800	INFO	Skip migrating dev migration file migration/dev/20220407000000__github_com.sql that's already migrated.
2022-05-07T15:43:37.489+0800	INFO	Skip migrating dev migration file migration/dev/20220407000001__sheet_vcs.sql that's already migrated.
2022-05-07T15:43:37.489+0800	INFO	Skip migrating dev migration file migration/dev/20220407000002__task_dag.sql that's already migrated.
2022-05-07T15:43:37.489+0800	INFO	Skip migrating dev migration file migration/dev/20220408000000__schema_version_type.sql that's already migrated.
2022-05-07T15:43:37.489+0800	INFO	Skip migrating dev migration file migration/dev/20220419000000__sheet_organizer.sql that's already migrated.
2022-05-07T15:43:37.489+0800	INFO	Skip dev mode migration; no new version.
2022-05-07T15:43:37.493+0800	INFO	Current schema version after migration: 1.0.1
2022-05-07T15:43:37.493+0800	INFO	Setting up demo data from "demo/dev"...
2022-05-07T15:43:37.493+0800	INFO	Applying data file demo/dev/10000__reset.sql...
2022-05-07T15:43:37.528+0800	INFO	Applying data file demo/dev/10001__principal.sql...
2022-05-07T15:43:37.530+0800	INFO	Applying data file demo/dev/10010__workspace.sql...
2022-05-07T15:43:37.530+0800	INFO	Applying data file demo/dev/10020__member.sql...
2022-05-07T15:43:37.531+0800	INFO	Applying data file demo/dev/10030__project.sql...
2022-05-07T15:43:37.534+0800	INFO	Applying data file demo/dev/10040__project_member.sql...
2022-05-07T15:43:37.539+0800	INFO	Applying data file demo/dev/10041__project_webhook.sql...
2022-05-07T15:43:37.542+0800	INFO	Applying data file demo/dev/10050__environment.sql...
2022-05-07T15:43:37.544+0800	INFO	Applying data file demo/dev/10051__policy.sql...
2022-05-07T15:43:37.548+0800	INFO	Applying data file demo/dev/10060__instance.sql...
2022-05-07T15:43:37.551+0800	INFO	Applying data file demo/dev/10061__instance_user.sql...
2022-05-07T15:43:37.555+0800	INFO	Applying data file demo/dev/10070__db.sql...
2022-05-07T15:43:37.561+0800	INFO	Applying data file demo/dev/10071__tbl.sql...
2022-05-07T15:43:37.565+0800	INFO	Applying data file demo/dev/10072__col.sql...
2022-05-07T15:43:37.574+0800	INFO	Applying data file demo/dev/10073__idx.sql...
2022-05-07T15:43:37.578+0800	INFO	Applying data file demo/dev/10074__backup.sql...
2022-05-07T15:43:37.580+0800	INFO	Applying data file demo/dev/10080__data_source.sql...
2022-05-07T15:43:37.584+0800	INFO	Applying data file demo/dev/10090__pipeline.sql...
2022-05-07T15:43:37.590+0800	INFO	Applying data file demo/dev/10100__stage.sql...
2022-05-07T15:43:37.593+0800	INFO	Applying data file demo/dev/10110__task.sql...
2022-05-07T15:43:37.597+0800	INFO	Applying data file demo/dev/10111__task_dag.sql...
2022-05-07T15:43:37.599+0800	INFO	Applying data file demo/dev/10120__task_run.sql...
2022-05-07T15:43:37.604+0800	INFO	Applying data file demo/dev/10121__task_check_run.sql...
2022-05-07T15:43:37.606+0800	INFO	Applying data file demo/dev/10130__issue.sql...
2022-05-07T15:43:37.609+0800	INFO	Applying data file demo/dev/10131__issue_subscriber.sql...
2022-05-07T15:43:37.610+0800	INFO	Applying data file demo/dev/10140__activity.sql...
2022-05-07T15:43:37.613+0800	INFO	Applying data file demo/dev/10150__inbox.sql...
2022-05-07T15:43:37.615+0800	INFO	Applying data file demo/dev/10160__bookmark.sql...
2022-05-07T15:43:37.617+0800	INFO	Applying data file demo/dev/10170__vcs.sql...
2022-05-07T15:43:37.620+0800	INFO	Applying data file demo/dev/10180__repository.sql...
2022-05-07T15:43:37.622+0800	INFO	Applying data file demo/dev/10190__anomaly.sql...
2022-05-07T15:43:37.623+0800	INFO	Applying data file demo/dev/10200__label.sql...
2022-05-07T15:43:37.626+0800	INFO	Applying data file demo/dev/10210__deployment_config.sql...
2022-05-07T15:43:37.627+0800	INFO	Applying data file demo/dev/10220__sheet.sql...
2022-05-07T15:43:37.628+0800	INFO	Applying data file demo/dev/10221__sheet_organizer.sql...
2022-05-07T15:43:37.629+0800	INFO	Completed demo data setup.
2022-05-07T15:43:37.630+0800	INFO	Dev mode, skip embedding frontend
2022-05-07T15:43:37.630+0800	INFO	get project env	{"env": "dev"}
2022-05-07T15:43:37.630+0800	INFO	load public pem	{"file": "keys/dev.pub.pem"}

   ____    __
  / __/___/ /  ___
 / _// __/ _ \/ _ \
/___/\__/_//_/\___/ v4.6.1
High performance, minimalist Go web framework
https://echo.labstack.com
____________________________________O/_______
                                    O\
⇨ http server started on [::]:1236
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:38 packets.go:37: unexpected EOF
{"time":"2022-05-07T15:43:38+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:38+08:00","method":"PATCH","uri":"/api/pipeline/9012/task/11021/status","status":200,"error":""}
{"time":"2022-05-07T15:43:38+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/pipeline/9011/task/11020/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/pipeline/9011/task/11020/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/issue/13011/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/issue/13011/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/pipeline/9011/task/11020/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/pipeline/9011/task/11020/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/pipeline/9011/task/11020/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/issue/13012/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/issue/13011/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/issue/13011","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/issue/13011/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"PATCH","uri":"/api/issue/13011/status","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"GET","uri":"/api/database?project=3008","status":200,"error":""}
{"time":"2022-05-07T15:43:39+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:39.948573+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2FtestVCSSchemaUpdate__ver1__migrate__create_a_test_table.sql?ref=","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":26666,"latency_human":"26.666µs","bytes_in":0,"bytes_out":309}
{"time":"2022-05-07T15:43:39+08:00","method":"POST","uri":"/hook/gitlab/58bb3622-8c1f-468e-8d72-8c96a2f00817","status":200,"error":""}
{"time":"2022-05-07T15:43:40+08:00","method":"GET","uri":"/api/issue?project=3008&status=OPEN","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"PATCH","uri":"/api/pipeline/9012/task/11021/status","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"PATCH","uri":"/api/pipeline/9012/task/11021/status","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"PATCH","uri":"/api/pipeline/9013/task/11022/status","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"POST","uri":"/api/auth/login/BYTEBASE","status":200,"error":""}
2022-05-07T15:43:41.936+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:41.936+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:41.937+0800	INFO	Trying to close database connections
2022-05-07T15:43:41.937+0800	INFO	Trying to shutdown postgresql server...
waiting for server to shut down....2022-05-07 15:43:41.942 CST [77727] LOG:  received fast shutdown request
2022-05-07 15:43:41.943 CST [77727] LOG:  aborting any active transactions
2022-05-07 15:43:41.943 CST [77727] LOG:  background worker "logical replication launcher" (PID 77734) exited with exit code 1
2022-05-07 15:43:41.943 CST [77729] LOG:  shutting down
2022-05-07 15:43:41.957 CST [77727] LOG:  database system is shut down
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:41+08:00","method":"PATCH","uri":"/api/pipeline/9012/task/11021/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
 done
server stopped
2022-05-07T15:43:42.047+0800	INFO	Bytebase stopped properly
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/pipeline/9012/task/11021/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/pipeline/9012/task/11021/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
--- PASS: TestServiceRestart (41.87s)
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/issue/13012/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/issue/13012/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/issue/13013/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/issue/13012/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:42.761252+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2F.testVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":404,"error":"","latency":7250,"latency_human":"7.25µs","bytes_in":0,"bytes_out":61}
{"time":"2022-05-07T15:43:42.761435+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"POST","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2F.testVCSSchemaUpdate__LATEST.sql","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":12042,"latency_human":"12.042µs","bytes_in":356,"bytes_out":0}
{"time":"2022-05-07T15:43:42.761525+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2F.testVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":4166,"latency_human":"4.166µs","bytes_in":0,"bytes_out":253}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"PATCH","uri":"/api/issue/13012/status","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:42.834637+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2FtestVCSSchemaUpdate__ver2__data__insert_data.sql?ref=","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":8084,"latency_human":"8.084µs","bytes_in":0,"bytes_out":262}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/hook/gitlab/58bb3622-8c1f-468e-8d72-8c96a2f00817","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue?project=3008&status=OPEN","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"GET","uri":"/api/issue/13012","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:42+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
2022-05-07T15:43:43.463+0800	ERROR	Failed to mark task check run as FAILED	{"id": 12103, "task_id": 11004, "type": "bb.task-check.instance.migration-schema", "error": "failed to patch TaskCheckRunStatus with TaskCheckRunStatusPatch[&{ID:0x14000803cc0 UpdaterID:1 Status:FAILED Code:101 Result:{\"detail\":\"failed to connect database at mysql.staging.example.com:3306 with user \\\"admin\\\": driver: bad connection\"}}], error[sql: database is closed]"}
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:43 packets.go:37: unexpected EOF
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"PATCH","uri":"/api/pipeline/9013/task/11022/status","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"PATCH","uri":"/api/pipeline/9013/task/11022/status","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"PATCH","uri":"/api/pipeline/9014/task/11023/status","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"PATCH","uri":"/api/pipeline/9013/task/11022/status","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"PATCH","uri":"/api/pipeline/9013/task/11022/status","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:44+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"PATCH","uri":"/api/pipeline/9013/task/11022/status","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"PATCH","uri":"/api/issue/13013/status","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"PATCH","uri":"/api/issue/13013/status","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"PATCH","uri":"/api/issue/13014/status","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/database?project=3008","status":200,"error":""}
{"time":"2022-05-07T15:43:45.562242+08:00","id":"","remote_ip":"::1","host":"localhost:1263","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FtestTenantVCSSchemaUpdate__ver1__migrate__create_a_test_table.sql?ref=","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":5292,"latency_human":"5.292µs","bytes_in":0,"bytes_out":316}
{"time":"2022-05-07T15:43:45+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"POST","uri":"/hook/gitlab/dc700a30-33e1-4886-9b97-a80711e1c6e0","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue?project=3008&status=OPEN","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"PATCH","uri":"/api/issue/13013/status","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45.716064+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2F.testVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":6541,"latency_human":"6.541µs","bytes_in":0,"bytes_out":253}
{"time":"2022-05-07T15:43:45.716171+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"PUT","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2F.testVCSSchemaUpdate__LATEST.sql","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":8875,"latency_human":"8.875µs","bytes_in":356,"bytes_out":0}
{"time":"2022-05-07T15:43:45.716239+08:00","id":"","remote_ip":"::1","host":"localhost:1242","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FProd%2F.testVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":3167,"latency_human":"3.167µs","bytes_in":0,"bytes_out":253}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"PATCH","uri":"/api/issue/13013/status","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/instance/6011/migration/history","status":200,"error":""}
2022-05-07T15:43:45.763+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:45.763+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:45.764+0800	INFO	Trying to close database connections
2022-05-07T15:43:45.764+0800	INFO	Trying to shutdown postgresql server...
waiting for server to shut down....2022-05-07 15:43:45.769 CST [77431] LOG:  received fast shutdown request
2022-05-07 15:43:45.771 CST [77431] LOG:  aborting any active transactions
2022-05-07 15:43:45.771 CST [77431] LOG:  background worker "logical replication launcher" (PID 77439) exited with exit code 1
2022-05-07 15:43:45.772 CST [77434] LOG:  shutting down
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
2022-05-07 15:43:45.814 CST [77431] LOG:  database system is shut down
 done
server stopped
2022-05-07T15:43:45.870+0800	INFO	Bytebase stopped properly
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/issue/13013","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/instance/6011/migration/history","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"POST","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:45+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
--- PASS: TestVCS (45.65s)
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
2022-05-07T15:43:46.810+0800	ERROR	Failed to change task status.	{"id": 11023, "name": "backup-task-name", "old_status": "PENDING", "new_status": "RUNNING", "error": "failed to find issue with pipeline ID 9014, task: backup-task-name"}
2022-05-07T15:43:46.810+0800	ERROR	Failed to schedule next running task	{"pipeline_id": 9014, "error": "failed to find issue with pipeline ID 9014, task: backup-task-name"}
2022-05-07T15:43:46.814+0800	ERROR	Failed to change task status.	{"id": 11023, "name": "backup-task-name", "old_status": "RUNNING", "new_status": "DONE", "error": "failed to find issue with pipeline ID 9014, task: backup-task-name"}
2022-05-07T15:43:46.814+0800	ERROR	Failed to mark task as DONE	{"id": 11023, "name": "backup-task-name", "error": "failed to find issue with pipeline ID 9014, task: backup-task-name"}
{"time":"2022-05-07T15:43:46+08:00","method":"GET","uri":"/api/database/7033/backup","status":200,"error":""}
{"time":"2022-05-07T15:43:46+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"PATCH","uri":"/api/pipeline/9014/task/11023/status","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"PATCH","uri":"/api/pipeline/9014/task/11023/status","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"PATCH","uri":"/api/pipeline/9014/task/11023/status","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11024/status","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:47+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11025/status","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
2022-05-07T15:43:48.061+0800	ERROR	Failed to mark task check run as FAILED	{"id": 12103, "task_id": 11004, "type": "bb.task-check.instance.migration-schema", "error": "failed to patch TaskCheckRunStatus with TaskCheckRunStatusPatch[&{ID:0x14000cab180 UpdaterID:1 Status:FAILED Code:101 Result:{\"detail\":\"failed to connect database at mysql.staging.example.com:3306 with user \\\"admin\\\": driver: bad connection\"}}], error[sql: database is closed]"}
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
2022-05-07T15:43:48.061+0800	ERROR	Failed to mark task check run as FAILED	{"id": 12103, "task_id": 11004, "type": "bb.task-check.instance.migration-schema", "error": "failed to patch TaskCheckRunStatus with TaskCheckRunStatusPatch[&{ID:0x140011e9720 UpdaterID:1 Status:FAILED Code:101 Result:{\"detail\":\"failed to connect database at mysql.staging.example.com:3306 with user \\\"admin\\\": driver: bad connection\"}}], error[sql: database is closed]"}
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
[mysql] 2022/05/07 15:43:48 packets.go:37: unexpected EOF
{"time":"2022-05-07T15:43:48+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11026/status","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11027/status","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"PATCH","uri":"/api/issue/13014/status","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/database?project=3008","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"PATCH","uri":"/api/issue/13014/status","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/database?project=3008","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"POST","uri":"/api/issue","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"PATCH","uri":"/api/issue/13014/status","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/database?project=3008","status":200,"error":""}
{"time":"2022-05-07T15:43:48.649056+08:00","id":"","remote_ip":"::1","host":"localhost:1248","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2FtestTenantVCSSchemaUpdate__ver1__migrate__create_a_test_table.sql?ref=","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":5416,"latency_human":"5.416µs","bytes_in":0,"bytes_out":316}
{"time":"2022-05-07T15:43:48+08:00","method":"POST","uri":"/hook/gitlab/b8b26f7c-703c-4d63-9b9d-9ed3843bc19d","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue?project=3008&status=OPEN","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:48+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11024/status","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:49+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11024/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11025/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11026/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11024/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11027/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11025/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13014","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11026/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11024/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"PATCH","uri":"/api/issue/13014/status","status":200,"error":""}
{"time":"2022-05-07T15:43:50+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/instance/6011/migration/history?database=testClone","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/sheet","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/sheet/my","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/database/7033/data-source","status":200,"error":""}
2022-05-07T15:43:51.052+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:51.052+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:51.053+0800	INFO	Trying to close database connections
2022-05-07T15:43:51.053+0800	INFO	Trying to shutdown postgresql server...
waiting for server to shut down....2022-05-07 15:43:51.061 CST [77464] LOG:  received fast shutdown request
2022-05-07 15:43:51.062 CST [77464] LOG:  aborting any active transactions
2022-05-07 15:43:51.062 CST [77464] LOG:  background worker "logical replication launcher" (PID 77480) exited with exit code 1
2022-05-07 15:43:51.062 CST [77475] LOG:  shutting down
{"time":"2022-05-07T15:43:51+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11027/status","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11025/status","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
2022-05-07 15:43:51.103 CST [77464] LOG:  database system is shut down
 done
server stopped
2022-05-07T15:43:51.163+0800	INFO	Bytebase stopped properly
{"time":"2022-05-07T15:43:51+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11026/status","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"PATCH","uri":"/api/pipeline/9015/task/11027/status","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
--- PASS: TestSchemaAndDataUpdate (50.96s)
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51.512627+08:00","id":"","remote_ip":"::1","host":"localhost:1263","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2F.testTenantVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":404,"error":"","latency":6250,"latency_human":"6.25µs","bytes_in":0,"bytes_out":62}
{"time":"2022-05-07T15:43:51.512735+08:00","id":"","remote_ip":"::1","host":"localhost:1263","method":"POST","uri":"/api/v4/projects/121/repository/files/bbtest%2F.testTenantVCSSchemaUpdate__LATEST.sql","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":8208,"latency_human":"8.208µs","bytes_in":370,"bytes_out":0}
{"time":"2022-05-07T15:43:51.513293+08:00","id":"","remote_ip":"::1","host":"localhost:1263","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2F.testTenantVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":5375,"latency_human":"5.375µs","bytes_in":0,"bytes_out":260}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/instance/6011/migration/history?database=testTenantVCSSchemaUpdate_tenant0","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/instance/6012/migration/history?database=testTenantVCSSchemaUpdate_tenant0","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/instance/6013/migration/history?database=testTenantVCSSchemaUpdate_tenant1","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/instance/6014/migration/history?database=testTenantVCSSchemaUpdate_tenant2","status":200,"error":""}
2022-05-07T15:43:51.605+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:51.605+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:51.610+0800	INFO	Trying to close database connections
2022-05-07T15:43:51.610+0800	INFO	Trying to shutdown postgresql server...
2022-05-07T15:43:51.612+0800	ERROR	Failed to change task status.	{"id": 11027, "name": "Update \"testTenantVCSSchemaUpdate_tenant0\" schema", "old_status": "RUNNING", "new_status": "DONE", "error": "failed to mark issue  as DONE after completing task Update \"testTenantVCSSchemaUpdate_tenant0\" schema: failed to update issue[] status, failed to update pipeline status with patch &{ID:9015 UpdaterID:1 Status:DONE}, error: failed to compose Pipeline with pipelineRaw[&{ID:9015 CreatorID:1 CreatedTs:1651909426 UpdaterID:1 UpdatedTs:1651909432 Name:Update database schema pipeline Status:DONE}], error[failed to compose Stage with stageRaw[&{ID:10023 CreatorID:1 CreatedTs:1651909426 UpdaterID:1 UpdatedTs:1651909426 PipelineID:9015 EnvironmentID:5004 Name:Deployment: Prod stage}], error[failed to compose Task with taskRaw[&{ID:11025 CreatorID:1 CreatedTs:1651909426 UpdaterID:1 UpdatedTs:1651909429 PipelineID:9015 StageID:10023 InstanceID:6014 DatabaseID:0x14002b480e0 TaskRunRawList:[0x1400226a000] TaskCheckRunRawList:[0x14001d58000 0x14001d58090] Name:Update \"testTenantVCSSchemaUpdate_tenant2\" schema Status:DONE Type:bb.task.database.schema.update Payload:{\"pushEvent\": {\"ref\": \"refs/heads/feature/foo\", \"baseDir\": \"bbtest\", \"vcsType\": \"GITLAB_SELF_HOST\", \"authorName\": \"\", \"fileCommit\": {\"id\": \"\", \"url\": \"\", \"added\": \"bbtest/testTenantVCSSchemaUpdate__ver1__migrate__create_a_test_table.sql\", \"title\": \"\", \"message\": \"\", \"createdTs\": 1610543640, \"authorName\": \"\"}, \"repositoryId\": \"121\", \"repositoryUrl\": \"\", \"repositoryFullPath\": \"\"}, \"statement\": \"\\n\\tCREATE TABLE book (\\n\\t\\tid INTEGER PRIMARY KEY AUTOINCREMENT,\\n\\t\\tname TEXT NULL\\n\\t);\", \"migrationType\": \"MIGRATE\", \"schemaVersion\": \"20220507154345\"} EarliestAllowedTs:0 BlockedBy:[]}], error[failed to compose Instance with instanceRaw[&{ID:6014 RowStatus:NORMAL CreatorID:101 CreatedTs:1651909413 UpdaterID:1 UpdatedTs:1651909413 EnvironmentID:5004 Name:testInstanceProd-2 Engine:SQLITE EngineVersion:3.35.4 ExternalLink: Host:/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/002/testInstanceProd-2 Port:}], error[failed to find DataSource list with DataSourceFind[{\"ID\":null,\"InstanceID\":6014,\"DatabaseID\":null,\"Type\":null}], error[sql: database is closed]]]]]"}
2022-05-07T15:43:51.612+0800	ERROR	Failed to mark task as DONE	{"id": 11027, "name": "Update \"testTenantVCSSchemaUpdate_tenant0\" schema", "error": "failed to mark issue  as DONE after completing task Update \"testTenantVCSSchemaUpdate_tenant0\" schema: failed to update issue[] status, failed to update pipeline status with patch &{ID:9015 UpdaterID:1 Status:DONE}, error: failed to compose Pipeline with pipelineRaw[&{ID:9015 CreatorID:1 CreatedTs:1651909426 UpdaterID:1 UpdatedTs:1651909432 Name:Update database schema pipeline Status:DONE}], error[failed to compose Stage with stageRaw[&{ID:10023 CreatorID:1 CreatedTs:1651909426 UpdaterID:1 UpdatedTs:1651909426 PipelineID:9015 EnvironmentID:5004 Name:Deployment: Prod stage}], error[failed to compose Task with taskRaw[&{ID:11025 CreatorID:1 CreatedTs:1651909426 UpdaterID:1 UpdatedTs:1651909429 PipelineID:9015 StageID:10023 InstanceID:6014 DatabaseID:0x14002b480e0 TaskRunRawList:[0x1400226a000] TaskCheckRunRawList:[0x14001d58000 0x14001d58090] Name:Update \"testTenantVCSSchemaUpdate_tenant2\" schema Status:DONE Type:bb.task.database.schema.update Payload:{\"pushEvent\": {\"ref\": \"refs/heads/feature/foo\", \"baseDir\": \"bbtest\", \"vcsType\": \"GITLAB_SELF_HOST\", \"authorName\": \"\", \"fileCommit\": {\"id\": \"\", \"url\": \"\", \"added\": \"bbtest/testTenantVCSSchemaUpdate__ver1__migrate__create_a_test_table.sql\", \"title\": \"\", \"message\": \"\", \"createdTs\": 1610543640, \"authorName\": \"\"}, \"repositoryId\": \"121\", \"repositoryUrl\": \"\", \"repositoryFullPath\": \"\"}, \"statement\": \"\\n\\tCREATE TABLE book (\\n\\t\\tid INTEGER PRIMARY KEY AUTOINCREMENT,\\n\\t\\tname TEXT NULL\\n\\t);\", \"migrationType\": \"MIGRATE\", \"schemaVersion\": \"20220507154345\"} EarliestAllowedTs:0 BlockedBy:[]}], error[failed to compose Instance with instanceRaw[&{ID:6014 RowStatus:NORMAL CreatorID:101 CreatedTs:1651909413 UpdaterID:1 UpdatedTs:1651909413 EnvironmentID:5004 Name:testInstanceProd-2 Engine:SQLITE EngineVersion:3.35.4 ExternalLink: Host:/var/folders/6n/ck1_j9h96j73hkklj4yv31wc0000gn/T/TestTenantVCSDatabaseNameTemplate2370789535/002/testInstanceProd-2 Port:}], error[failed to find DataSource list with DataSourceFind[{\"ID\":null,\"InstanceID\":6014,\"DatabaseID\":null,\"Type\":null}], error[sql: database is closed]]]]]"}
waiting for server to shut down....2022-05-07 15:43:51.615 CST [77266] LOG:  received fast shutdown request
2022-05-07 15:43:51.615 CST [77266] LOG:  aborting any active transactions
2022-05-07 15:43:51.616 CST [77266] LOG:  background worker "logical replication launcher" (PID 77273) exited with exit code 1
2022-05-07 15:43:51.616 CST [77268] LOG:  shutting down
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
2022-05-07 15:43:51.662 CST [77266] LOG:  database system is shut down
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
 done
server stopped
2022-05-07T15:43:51.717+0800	INFO	Bytebase stopped properly
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
--- PASS: TestTenantVCSDatabaseNameTemplate (51.50s)
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:51+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:52+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
[mysql] 2022/05/07 15:43:52 packets.go:37: unexpected EOF
2022-05-07T15:43:52.954+0800	ERROR	Failed to mark task check run as FAILED	{"id": 12103, "task_id": 11004, "type": "bb.task-check.instance.migration-schema", "error": "failed to patch TaskCheckRunStatus with TaskCheckRunStatusPatch[&{ID:0x140016dcb40 UpdaterID:1 Status:FAILED Code:101 Result:{\"detail\":\"failed to connect database at mysql.staging.example.com:3306 with user \\\"admin\\\": driver: bad connection\"}}], error[sql: database is closed]"}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:53+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6011/migration/history?database=testTenantSchemaUpdate","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6012/migration/history?database=testTenantSchemaUpdate","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6013/migration/history?database=testTenantSchemaUpdate","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6014/migration/history?database=testTenantSchemaUpdate","status":200,"error":""}
2022-05-07T15:43:54.271+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:54.271+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:54.272+0800	INFO	Trying to close database connections
2022-05-07T15:43:54.272+0800	INFO	Trying to shutdown postgresql server...
waiting for server to shut down....2022-05-07 15:43:54.276 CST [77343] LOG:  received fast shutdown request
2022-05-07 15:43:54.276 CST [77343] LOG:  aborting any active transactions
2022-05-07 15:43:54.277 CST [77343] LOG:  background worker "logical replication launcher" (PID 77352) exited with exit code 1
2022-05-07 15:43:54.277 CST [77347] LOG:  shutting down
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
2022-05-07 15:43:54.323 CST [77343] LOG:  database system is shut down
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
 done
server stopped
2022-05-07T15:43:54.382+0800	INFO	Bytebase stopped properly
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
2022-05-07T15:43:54.539+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:54.539+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:54.540+0800	INFO	Trying to close database connections
2022-05-07T15:43:54.540+0800	INFO	Trying to shutdown postgresql server...
--- PASS: TestTenant (54.19s)
waiting for server to shut down....2022-05-07 15:43:54.544 CST [77356] LOG:  received fast shutdown request
2022-05-07 15:43:54.544 CST [77356] LOG:  aborting any active transactions
2022-05-07 15:43:54.545 CST [77356] LOG:  background worker "logical replication launcher" (PID 77367) exited with exit code 1
2022-05-07 15:43:54.545 CST [77362] LOG:  shutting down
2022-05-07 15:43:54.587 CST [77356] LOG:  database system is shut down
 done
server stopped
2022-05-07T15:43:54.649+0800	INFO	Bytebase stopped properly
{"time":"2022-05-07T15:43:54.668502+08:00","id":"","remote_ip":"::1","host":"localhost:1248","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2F.testTenantVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":404,"error":"","latency":8208,"latency_human":"8.208µs","bytes_in":0,"bytes_out":62}
{"time":"2022-05-07T15:43:54.668657+08:00","id":"","remote_ip":"::1","host":"localhost:1248","method":"POST","uri":"/api/v4/projects/121/repository/files/bbtest%2F.testTenantVCSSchemaUpdate__LATEST.sql","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":11458,"latency_human":"11.458µs","bytes_in":362,"bytes_out":0}
{"time":"2022-05-07T15:43:54.668732+08:00","id":"","remote_ip":"::1","host":"localhost:1248","method":"GET","uri":"/api/v4/projects/121/repository/files/bbtest%2F.testTenantVCSSchemaUpdate__LATEST.sql?ref=feature%2Ffoo","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":4166,"latency_human":"4.166µs","bytes_in":0,"bytes_out":260}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/issue/13015","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"POST","uri":"/api/sql/execute","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6011/migration/history?database=testTenantVCSSchemaUpdate","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6012/migration/history?database=testTenantVCSSchemaUpdate","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6013/migration/history?database=testTenantVCSSchemaUpdate","status":200,"error":""}
{"time":"2022-05-07T15:43:54+08:00","method":"GET","uri":"/api/instance/6014/migration/history?database=testTenantVCSSchemaUpdate","status":200,"error":""}
2022-05-07T15:43:54.727+0800	INFO	Trying to stop Bytebase ....
2022-05-07T15:43:54.727+0800	INFO	Trying to gracefully shutdown server
2022-05-07T15:43:54.728+0800	INFO	Trying to close database connections
2022-05-07T15:43:54.728+0800	INFO	Trying to shutdown postgresql server...
waiting for server to shut down....2022-05-07 15:43:54.734 CST [77379] LOG:  received fast shutdown request
2022-05-07 15:43:54.734 CST [77379] LOG:  aborting any active transactions
2022-05-07 15:43:54.735 CST [77379] LOG:  background worker "logical replication launcher" (PID 77386) exited with exit code 1
2022-05-07 15:43:54.737 CST [77381] LOG:  shutting down
2022-05-07 15:43:54.793 CST [77379] LOG:  database system is shut down
--- PASS: TestTenantDatabaseNameTemplate (54.47s)
 done
server stopped
2022-05-07T15:43:54.835+0800	INFO	Bytebase stopped properly
--- PASS: TestTenantVCS (54.62s)
PASS
ok  	github.com/bytebase/bytebase/tests	55.229s
?   	github.com/bytebase/bytebase/tests/fake	[no test files]
