- oldSchema: |
    CREATE VIEW `a` AS SELECT 1 AS id, 1 AS name;
    CREATE VIEW `a` AS SELECT `id`, `name` FROM `book`;
  newSchema: |
    CREATE VIEW `a` AS SELECT 1 AS id;
    CREATE VIEW `a` AS SELECT `id` FROM `book`;
  diff: |+
    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `a` AS SELECT `id` FROM `book`;

- oldSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE VIEW `a` AS SELECT `id`, `name` FROM `book`;
  newSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE VIEW `a` AS SELECT `id` FROM `book`;
    CREATE VIEW `b` AS SELECT `id` FROM `a`;
  diff: |+
    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `b` AS SELECT SQL_NO_CACHE 1 AS `id`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `a` AS SELECT `id` FROM `book`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `b` AS SELECT `id` FROM `a`;

- oldSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE VIEW `a` AS SELECT `id`, `name` FROM `book`;
  newSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE VIEW `a` AS SELECT `id` AS `a_id` FROM `book`;
    CREATE VIEW `b` AS SELECT `id` AS `b_id` FROM `a`;
  diff: |+
    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `b` AS SELECT SQL_NO_CACHE 1 AS `b_id`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `a` AS SELECT `id` AS `a_id` FROM `book`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `b` AS SELECT `id` AS `b_id` FROM `a`;

- oldSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE VIEW `a` AS SELECT `id` FROM `book`;
  newSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE VIEW `a` AS SELECT * FROM `book`;
    CREATE VIEW `b` AS SELECT * FROM `a`;
  diff: |+
    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `b` AS SELECT SQL_NO_CACHE 1 AS `id`, 1 AS `name`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `a` AS SELECT * FROM `book`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `b` AS SELECT * FROM `a`;

- oldSchema: ""
  newSchema: |
    CREATE TABLE `book` (`id` INT, `name` VARCHAR(25));
    CREATE TABLE `e` (`c` INT, `d` INT);
    CREATE VIEW `a` AS WITH `cte` AS (SELECT `id`, `name` FROM `book`) SELECT `id`, `name` FROM `cte` UNION SELECT `c`, `d` FROM `e`;
  diff: |+
    CREATE TABLE IF NOT EXISTS `book` (`id` INT, `name` VARCHAR(25));

    CREATE TABLE IF NOT EXISTS `e` (`c` INT, `d` INT);

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `a` AS SELECT SQL_NO_CACHE 1 AS `id`, 1 AS `name`;

    CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=CURRENT_USER SQL SECURITY DEFINER VIEW `a` AS WITH `cte` AS (SELECT `id`, `name` FROM `book`) SELECT `id`, `name` FROM `cte` UNION SELECT `c`, `d` FROM `e`;

