syntax = "proto3";

package bytebase.store;

import "store/approval_template.proto";

option go_package = "generated-go/store";

message ApprovalPayload {
  int32 pipeline_id = 1;
  int32 stage_id = 2;
  optional int32 task_id = 3;
  repeated ApprovalHistory history = 4;
}

enum ApprovalNodeStatus {
  APPROVAL_NODE_STATUS_UNSPECIFIED = 0;
  PENDING = 1;
  APPROVED = 2;
}

message ApprovalHistory {
  // The `uid` of the approval node.
  string node_uid = 1;
  // The new status.
  ApprovalNodeStatus status = 2;
  // The principal id of the approver.
  int32 principal_id = 3;
}
